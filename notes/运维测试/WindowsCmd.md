# 获取局域网内所有IP

1. 用ipconfig获取网段，比如192.168.3.31，网段就是192.168.3.*
2. 使用如下命令，遍历ping局域网内所有的ip地址，这样就可以查找到那些IP地址在用。其中“%i”这个变量是从1至254，每次ping完就+1，这样就可以遍历ping到192.168.3.网段的所有IP地址。

```cmd
for /L %i IN (1,1,254) DO ping -w 1 -n 1 192.168.3.%i
```

- `for`：表示开始一个循环。

- `/L`：表示这是一个“**数值循环**”（Loop），即按数字递增的方式循环。

- `%i`：是循环变量（可以理解为“计数器”），每次循环它会取一个新值。

- ```
  IN (1,1,254)
  ```

  ：定义循环范围，格式为 

  ```
  (起始值, 步长, 结束值)
  ```

  - `1`：从 1 开始
  - `1`：每次增加 1（步长）
  - `254`：到 254 结束
  - 所以 `%i` 会依次取值：1, 2, 3, ..., 254

- `DO`：表示“执行后面的命令”，对每一个 `%i` 都执行一次。

| `ping`         | 是 Windows 的网络诊断命令，用于测试主机之间的连通性（基于 ICMP 协议）。 |
| -------------- | ------------------------------------------------------------ |
| `192.168.3.%i` | 要 ping 的目标 IP 地址。`%i`是变量，会被替换成当前循环的数字。例如当`%i=5`时，目标是`192.168.3.5`。 |
| `-n 1`         | 表示只发送**1 个 ICMP 请求包**（默认是 4 个）。减少等待时间。 |
| `-w 1`         | 表示等待每个回复的**超时时间是 1 毫秒**（注意：单位是毫秒） ⚠️ 实际上`-w 1`太短，可能导致即使主机在线也收不到回复（建议至少 100）。 |

3. 当上面的命令执行完毕之后，再输入“arp -a”就可以查看到局域网内所有的在线的IP地址。

**tips: 建议必要情况下再使用这种方法，可以使用nmap**



# nmap

```cmd
nmap -sn 192.168.3.0/24
```

| `nmap`           | 网络扫描工具                                                 |
| ---------------- | ------------------------------------------------------------ |
| `-sn`            | **Ping Scan**（仅发现主机是否在线，不进行端口扫描） 也叫“主机发现”模式 |
| `192.168.3.0/24` | 表示 IP 范围：`192.168.3.1`到`192.168.3.254` `/24`是子网掩码`255.255.255.0`的简写 |